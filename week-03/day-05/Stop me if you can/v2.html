<body>
  <div class="downCount"></div>
  <button>cancel!</button>
</body>
<script>
  let start = new Date()
  let button = document.querySelector('button')
  let downCount = document.querySelector('.downCount')
  let myVar

  let intetval = setInterval(() => {
    let end = new Date()
    downCount.textContent = Math.round((end - start) / 10) / 100
  }, 10)

  initPromise(button).catch(() => {
    clearTimeout(myVar)
    clearInterval(intetval)
  })

  function initPromise(button) {
    return new Promise((resolve, reject) => {
      button.addEventListener('click', () => {
        reject()
      })

      myVar = setTimeout(function() {
        resolve()
        alert('5 seconds passed!')
        clearInterval(intetval)
      }, 5000)
    })
  }
</script>
